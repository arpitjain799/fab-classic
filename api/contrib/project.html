
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Project Tools &#8212; fab-classic  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Running Fabric’s Tests" href="../../running_tests.html" />
    <link rel="prev" title="File and Directory Management" href="files.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-fabric.contrib.project">
<span id="project-tools"></span><h1>Project Tools<a class="headerlink" href="#module-fabric.contrib.project" title="Permalink to this headline">¶</a></h1>
<p>Useful non-core functionality, e.g. functions composing multiple operations.</p>
<dl class="function">
<dt id="fabric.contrib.project.rsync_project">
<code class="descclassname">fabric.contrib.project.</code><code class="descname">rsync_project</code><span class="sig-paren">(</span><em>remote_dir</em>, <em>local_dir=None</em>, <em>exclude=()</em>, <em>delete=False</em>, <em>extra_opts=''</em>, <em>ssh_opts=''</em>, <em>capture=False</em>, <em>upload=True</em>, <em>default_opts='-pthrvz'</em><span class="sig-paren">)</span><a class="headerlink" href="#fabric.contrib.project.rsync_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronize a remote directory with the current project directory via rsync.</p>
<p>Where <code class="docutils literal notranslate"><span class="pre">upload_project()</span></code> makes use of <code class="docutils literal notranslate"><span class="pre">sftp</span></code> to copy one’s entire
project every time it is invoked, <code class="docutils literal notranslate"><span class="pre">rsync_project()</span></code> uses the <code class="docutils literal notranslate"><span class="pre">rsync</span></code>
command-line utility, which only transfers files newer than those on the
remote end.</p>
<p><code class="docutils literal notranslate"><span class="pre">rsync_project()</span></code> is thus a simple wrapper around <code class="docutils literal notranslate"><span class="pre">rsync</span></code>; for
details on how <code class="docutils literal notranslate"><span class="pre">rsync</span></code> works, please see its manpage. <code class="docutils literal notranslate"><span class="pre">rsync</span></code> must be
installed on both your local and remote systems in order for this operation
to work correctly.</p>
<p>This function makes use of Fabric’s <code class="docutils literal notranslate"><span class="pre">local()</span></code> operation, and returns the
output of that function call; thus it will return the stdout, if any, of
the resultant <code class="docutils literal notranslate"><span class="pre">rsync</span></code> call.</p>
<p><code class="docutils literal notranslate"><span class="pre">rsync_project()</span></code> uses the current Fabric connection parameters (user,
host, port) by default, adding them to rsync’s ssh options (then mixing in
<code class="docutils literal notranslate"><span class="pre">ssh_opts</span></code>, if given – see below.)</p>
<p><code class="docutils literal notranslate"><span class="pre">rsync_project()</span></code> takes the following parameters:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">remote_dir</span></code>: the only required parameter, this is the path to the
directory on the remote server. Due to how <code class="docutils literal notranslate"><span class="pre">rsync</span></code> is implemented, the
exact behavior depends on the value of <code class="docutils literal notranslate"><span class="pre">local_dir</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li>If <code class="docutils literal notranslate"><span class="pre">local_dir</span></code> ends with a trailing slash, the files will be
dropped inside of <code class="docutils literal notranslate"><span class="pre">remote_dir</span></code>. E.g.
<code class="docutils literal notranslate"><span class="pre">rsync_project(&quot;/home/username/project/&quot;,</span> <span class="pre">&quot;foldername/&quot;)</span></code> will drop
the contents of <code class="docutils literal notranslate"><span class="pre">foldername</span></code> inside of <code class="docutils literal notranslate"><span class="pre">/home/username/project</span></code>.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">local_dir</span></code> does <strong>not</strong> end with a trailing slash (and this
includes the default scenario, when <code class="docutils literal notranslate"><span class="pre">local_dir</span></code> is not specified),
<code class="docutils literal notranslate"><span class="pre">remote_dir</span></code> is effectively the “parent” directory, and a new
directory named after <code class="docutils literal notranslate"><span class="pre">local_dir</span></code> will be created inside of it. So
<code class="docutils literal notranslate"><span class="pre">rsync_project(&quot;/home/username&quot;,</span> <span class="pre">&quot;foldername&quot;)</span></code> would create a new
directory <code class="docutils literal notranslate"><span class="pre">/home/username/foldername</span></code> (if needed) and place the
files there.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">local_dir</span></code>: by default, <code class="docutils literal notranslate"><span class="pre">rsync_project</span></code> uses your current working
directory as the source directory. This may be overridden by specifying
<code class="docutils literal notranslate"><span class="pre">local_dir</span></code>, which is a string passed verbatim to <code class="docutils literal notranslate"><span class="pre">rsync</span></code>, and thus
may be a single directory (<code class="docutils literal notranslate"><span class="pre">&quot;my_directory&quot;</span></code>) or multiple directories
(<code class="docutils literal notranslate"><span class="pre">&quot;dir1</span> <span class="pre">dir2&quot;</span></code>). See the <code class="docutils literal notranslate"><span class="pre">rsync</span></code> documentation for details.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">exclude</span></code>: optional, may be a single string, or an iterable of strings,
and is used to pass one or more <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> options to <code class="docutils literal notranslate"><span class="pre">rsync</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">delete</span></code>: a boolean controlling whether <code class="docutils literal notranslate"><span class="pre">rsync</span></code>’s <code class="docutils literal notranslate"><span class="pre">--delete</span></code> option
is used. If True, instructs <code class="docutils literal notranslate"><span class="pre">rsync</span></code> to remove remote files that no
longer exist locally. Defaults to False.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">extra_opts</span></code>: an optional, arbitrary string which you may use to pass
custom arguments or options to <code class="docutils literal notranslate"><span class="pre">rsync</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ssh_opts</span></code>: Like <code class="docutils literal notranslate"><span class="pre">extra_opts</span></code> but specifically for the SSH options
string (rsync’s <code class="docutils literal notranslate"><span class="pre">--rsh</span></code> flag.)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">capture</span></code>: Sent directly into an inner <a class="reference internal" href="../core/operations.html#fabric.operations.local" title="fabric.operations.local"><code class="xref py py-obj docutils literal notranslate"><span class="pre">local</span></code></a> call.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">upload</span></code>: a boolean controlling whether file synchronization is
performed up or downstream. Upstream by default.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">default_opts</span></code>: the default rsync options <code class="docutils literal notranslate"><span class="pre">-pthrvz</span></code>, override if
desired (e.g. to remove verbosity, etc).</p>
</li>
</ul>
<p>Furthermore, this function transparently honors Fabric’s port and SSH key
settings. Calling this function when the current host string contains a
nonstandard port, or when <code class="docutils literal notranslate"><span class="pre">env.key_filename</span></code> is non-empty, will use the
specified port and/or SSH key filename(s).</p>
<p>For reference, the approximate <code class="docutils literal notranslate"><span class="pre">rsync</span></code> command-line call that is
constructed by this function is the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="p">[</span><span class="o">--</span><span class="n">delete</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">exclude</span> <span class="n">exclude</span><span class="p">[</span><span class="mi">0</span><span class="p">][,</span> <span class="o">--</span><span class="n">exclude</span><span class="p">[</span><span class="mi">1</span><span class="p">][,</span> <span class="o">...</span><span class="p">]]]</span> \
    <span class="p">[</span><span class="n">default_opts</span><span class="p">]</span> <span class="p">[</span><span class="n">extra_opts</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">local_dir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">host_string</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">remote_dir</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.4.0: </span>The <code class="docutils literal notranslate"><span class="pre">ssh_opts</span></code> keyword argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.4.1: </span>The <code class="docutils literal notranslate"><span class="pre">capture</span></code> keyword argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.8.0: </span>The <code class="docutils literal notranslate"><span class="pre">default_opts</span></code> keyword argument.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="fabric.contrib.project.upload_project">
<code class="descclassname">fabric.contrib.project.</code><code class="descname">upload_project</code><span class="sig-paren">(</span><em>local_dir=None</em>, <em>remote_dir=''</em>, <em>use_sudo=False</em><span class="sig-paren">)</span><a class="headerlink" href="#fabric.contrib.project.upload_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload the current project to a remote system via <code class="docutils literal notranslate"><span class="pre">tar</span></code>/<code class="docutils literal notranslate"><span class="pre">gzip</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">local_dir</span></code> specifies the local project directory to upload, and defaults
to the current working directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">remote_dir</span></code> specifies the target directory to upload into (meaning that
a copy of <code class="docutils literal notranslate"><span class="pre">local_dir</span></code> will appear as a subdirectory of <code class="docutils literal notranslate"><span class="pre">remote_dir</span></code>)
and defaults to the remote user’s home directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">use_sudo</span></code> specifies which method should be used when executing commands
remotely. <code class="docutils literal notranslate"><span class="pre">sudo</span></code> will be used if use_sudo is True, otherwise <code class="docutils literal notranslate"><span class="pre">run</span></code> will
be used.</p>
<p>This function makes use of the <code class="docutils literal notranslate"><span class="pre">tar</span></code> and <code class="docutils literal notranslate"><span class="pre">gzip</span></code> programs/libraries,
thus it will not work too well on Win32 systems unless one is using Cygwin
or something similar. It will attempt to clean up the local and remote
tarfiles when it finishes executing, even in the event of a failure.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.7: </span>Added the <code class="docutils literal notranslate"><span class="pre">use_sudo</span></code> kwarg.</p>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.png" alt="Logo"/>
    
    <h1 class="logo logo-name">fab-classic</h1>
    
  </a>
</p>



<p class="blurb">Pythonic remote execution</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=ploxiln&repo=fab-classic&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Overview and Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/env.html">The environment dictionary, <code class="docutils literal notranslate"><span class="pre">env</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/execution.html">Execution model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/fab.html"><code class="docutils literal notranslate"><span class="pre">fab</span></code> options and arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/fabfiles.html">Fabfile construction and use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/interactivity.html">Interaction with remote programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/library.html">Library Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/output_controls.html">Managing output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/parallel.html">Parallel execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/ssh.html">SSH behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/tasks.html">Defining tasks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core/colors.html">Color output functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/context_managers.html">Context Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/docs.html">Documentation helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/network.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/utils.html">Utils</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="console.html">Console Output Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="django.html">Django Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">File and Directory Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Project Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../running_tests.html">Running Fabric’s Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../old_changelog.html">Old Changelog</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Fabric authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/api/contrib/project.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>